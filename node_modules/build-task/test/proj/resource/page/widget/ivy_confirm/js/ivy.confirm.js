/**
 * @author pakin
 * @desc
 */
define(function(require, exports, module){
    var $ = require('jquery');

    // tpl
    var $tpl = $(require('tpl.confirm'));

    // bind hide
    $tpl.find('#ivyConfirmClose').click(ivyConfirmHide);

    function ivyConfirm(obj, callbackOK, callbackCancel){
        if(typeof obj != 'object'){
            return;
        }

        var title = obj.title ? obj.title : 'Tips',
        msg = obj.msg ? obj.msg : 'No Tips!',
        okText = obj.okText ? obj.okTex : "Confirm",
        cancelText = obj.cancelText ? obj.cancelText : "Cancel";

        $tpl.find('#ivyConfirmTitle').text(title);
        $tpl.find('#ivyConfirmMain').html(msg);

        $tpl.find('#ivyConfirmOK').text(okText).click(ivyConfirmHide)[0].onclick = typeof callbackOK == "function" ? callbackOK : null;

        $tpl.find('#ivyConfirmCancel').text(cancelText).click(ivyConfirmHide)[0].onclick = typeof callbackCancel == "function" ? callbackCancel : null;

        ivyConfirmShow();
    }

    // simple show
    function ivyConfirmShow(){
        $tpl.appendTo($('body'));
        setTimeout(function(){
            var top = $(window).height() - $tpl.children().height();
            top = top > 0 ? top / 2 : 0;
            top > maxTop ? top = maxTop : null;
            $tpl.children().css('top', top);
            $tpl.show();
        },50);
    }

    // simple hide
    function ivyConfirmHide(){
        $tpl.fadeOut(100,function(){
            $tpl.detach();
        });
    }

    /**
     * 添加额外属性
     */
    var minTop = null,
        maxTop = 200;
    ivyConfirm.setDefault = function(obj){
        minTop = obj.minTop ? obj.minTop : null;
        maxTop = obj.maxTop ? obj.maxTop : maxTop;
    }

    return ivyConfirm;
})
