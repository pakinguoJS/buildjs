define("page/app/home/js/index",["lib/cmd/jquery/2.0.3/jquery.js","page/widget/ivy_alert/js/ivy.alert.js","page/widget/home-preview/js/home-preview.js","page/widget/data-table/js/data-table.js","page/widget/advanced-pagination/js/advanced-pagination.js"],function(a){var b=a("lib/cmd/jquery/2.0.3/jquery.js"),c=a("page/widget/ivy_alert/js/ivy.alert.js");a("page/widget/home-preview/js/home-preview.js"),a("page/widget/data-table/js/data-table.js"),a("page/widget/advanced-pagination/js/advanced-pagination.js"),b("#modified-preview, #live-preview").homePreview(),b("#rule-table").dataTable(),b("#table-pagination").advancedPagination(),b("#table-pagination").on("pagination",function(a,c){b.getJSON("get_more",{page:a.page},function(a){var d=a.data.data.page_info.num*(a.data.data.page_info.page-1)+1,e=b.map(a.data.data.list,function(a,b){var c={id:[{type:"text",text:d+b},{type:"hidden",clazz:"item-id",value:a._id_h}],title:a.display_name,icon:[{type:"image",src:a.icon,alt:a.display_name}],type:{1:"Tags",2:"Manually",3:"Articles"}[a.rule_type],status:[{type:"link",clazz:"text-danger enable-btn "+(0!=a.status?"hidden":""),href:"javascript:void(0)",text:'<span class="glyphicon glyphicon-remove"></span>',tooltip:"Click to Enable"},{type:"link",clazz:"text-success disable-btn "+(0==a.status?"hidden":""),href:"javascript:void(0)",text:'<span class="glyphicon glyphicon-ok"></span>',tooltip:"Click to Disable"},{type:"hidden",clazz:"item-status",value:a.status}],lastModified:a.last_update,edit:[{type:"link",clazz:"modify-btn",href:"modify?id="+a._id_h,text:'<span class="glyphicon glyphicon-cog"></span>',tooltip:"Modify"},{type:"text",text:"&nbsp;"},{type:"link",clazz:"remove-btn",href:"javascript:void(0)",text:'<span class="glyphicon glyphicon-trash"></span>',tooltip:"Remove"}],weight:[{type:"textbox",clazz:"form-control input-sm text-center weight-input",value:a.show_index,width:50}]};return c});b("#rule-table").dataTable().clear().dataTable().addRow(e),c&&c()})}),b("#rule-table").delegate(".enable-btn","click",function(){var a=b(this).parents("tr").first();b.getJSON("online",{id:a.find(".item-id").val()},function(d){if(d.ret)c(d.msg);else{a.find(".enable-btn").addClass("hidden"),a.find(".disable-btn").removeClass("hidden");var e=b.map(d.data.online_list,function(a){return{title:a.display_name,iconUrl:a.icon}});b("#modified-preview").homePreview().clear().homePreview().addItem(e)}})}),b("#rule-table").delegate(".disable-btn","click",function(){var a=b(this).parents("tr").first();b.getJSON("offline",{id:a.find(".item-id").val()},function(d){if(d.ret)c(d.msg);else{a.find(".disable-btn").addClass("hidden"),a.find(".enable-btn").removeClass("hidden");var e=b.map(d.data.online_list,function(a){return{title:a.display_name,iconUrl:a.icon}});b("#modified-preview").homePreview().clear().homePreview().addItem(e)}})}),b("#rule-table").delegate(".weight-input","change",function(){var a=b(this).parents("tr").first(),d=parseInt(b(this).val());return isNaN(d)?!1:void b.getJSON("modify_index",{id:a.find(".item-id").val(),show_index:d},function(a){if(a.ret)c(a.msg);else{var d=b.map(a.data.online_list,function(a){return{title:a.display_name,iconUrl:a.icon}});b("#modified-preview").homePreview().clear().homePreview().addItem(d)}})}),b("#release-btn").click(function(){b.getJSON("../release/home_search",function(a){a.ret?c(a.msg):(c(a.msg),b("#live-preview").homePreview().clear().homePreview().addItem(b("#modified-preview").homePreview().getItemList()))})})}),define("page/widget/ivy_alert/js/ivy.alert",["page/widget/ivy_alert/css/ivy.alert.css","page/widget/ivy_alert/template/tpl.ivy.alert.js"],function(a,b,c){function d(a,b){h.find("#ivyAlertMain").text(a),b?null:b={},e(b),clearTimeout(g),b.toggle||(g=setTimeout(function(){f(),"function"==typeof b?b():"function"==typeof b.callback?b.callback():null},"number"==typeof b?b:b.duration?b.duration:i.duration))}function e(a){h.appendTo($("body")),setTimeout(function(){a.top?h.find("#ivyAlertMain").parent().css("top",a.top):h.find("#ivyAlertMain").parent().css("top",i.top),a.useMask?h.find("#ivyAlertMask").show():i.useMask?h.find("#ivyAlertMask").show():h.find("#ivyAlertMask").hide(),h.fadeIn(200)},20)}function f(){h.fadeOut(100,function(){h.detach()})}a("page/widget/ivy_alert/css/ivy.alert.css");var g,h=$(a("page/widget/ivy_alert/template/tpl.ivy.alert.js")),i={duration:1500,top:120,useMask:!0,callback:null};d.config=function(a){$.extend(i,a)},c.exports=d}),define("page/widget/ivy_alert/css/ivy.alert.css",[],function(){seajs.importStyle(".ivy-alert-wrap{position:fixed;top:0;left:0;width:100%;height:100%;z-index:1000;display:none}.ivy-alert{position:relative;margin:0 auto;min-height:50px;max-width:600px;text-align:center;top:120px}.ivy-alert-mask{position:absolute;top:0;left:0;width:100%;height:100%;background-color:rgba(255,255,255,.5);z-index:1001}.ivy-alert-main{position:relative;display:inline-block;font-size:14px;font-weight:700;color:#42484d;padding:16px 30px;background-color:#fff;border:1px solid #e15c4d;border-radius:3px;box-shadow:1px 1px 3px rgba(0,0,0,.35);z-index:1002}")}),define("page/widget/ivy_alert/template/tpl.ivy.alert",[],'<div class="ivy-alert-wrap">    <div id="ivyAlertMask" class="ivy-alert-mask"></div>    <div class="ivy-alert">        <p id="ivyAlertMain" class="ivy-alert-main"></p>    </div></div>'),define("page/widget/home-preview/js/home-preview",["lib/cmd/jquery/2.0.3/jquery.js","lib/cmd/bootstrap/3.2.0/js/bootstrap.min.js","../css/home-preview.css"],function(a){var b=a("lib/cmd/jquery/2.0.3/jquery.js");a("lib/cmd/bootstrap/3.2.0/js/bootstrap.min.js"),a("../css/home-preview.css"),b.fn.extend({homePreview:function(a){return a=a||{},this.each(function(){if(!b(this).data("homePreview")){b(this).data("homePreview",{});var a=b(this).find("li").map(function(){return{title:b(this).attr("data-title"),iconUrl:b(this).attr("data-icon-url")}});b(this).addClass("home-preview").empty().append(b('<div class="preview"></div>').append(b('<ul class="clearfix"></ul>'))).homePreview().addItem(a)}}),{$this:this,clear:function(){return this.$this.find(".preview > ul").empty(),this.$this},addItem:function(a){var c=this.$this;return b(a).each(function(a,d){c.find(".preview > ul").append(b('<li class="pull-left"></li>').data("homePreview",{title:d.title,iconUrl:d.iconUrl}).append(b('<img src="'+d.iconUrl+'" alt="'+d.title+'" />')).append(b("<p></p>").html(d.title)))}),this.$this},getItemList:function(){return this.$this.find(".preview > ul > li").map(function(){return{title:b(this).data("homePreview").title,iconUrl:b(this).data("homePreview").iconUrl}}).get()}}}})}),define("page/widget/home-preview/css/home-preview.css",[],function(){seajs.importStyle(".home-preview{margin:-15px}.home-preview .preview{width:320px;height:190px;border-bottom-left-radius:3px;border-bottom-right-radius:3px;background:#666 url(../img/bg.jpg) center -265px no-repeat;background-size:100%;overflow:hidden}.home-preview .preview>ul{margin:0 -8px;padding:3px 0;list-style:none}.home-preview .preview>ul>li{width:112px;padding:10px 0;text-align:center}.home-preview .preview>ul>li img{width:55px;height:55px;cursor:default}.home-preview .preview>ul>li p{margin:0;font-size:12px;color:rgba(255,255,255,.8);cursor:default}")}),define("page/widget/data-table/js/data-table",["lib/cmd/jquery/2.0.3/jquery.js","lib/cmd/bootstrap/3.2.0/js/bootstrap.min.js","../css/data-table.css"],function(a){var b=a("lib/cmd/jquery/2.0.3/jquery.js");a("lib/cmd/bootstrap/3.2.0/js/bootstrap.min.js"),a("../css/data-table.css"),b.fn.extend({dataTable:function(a){return this.each(function(){if(!b(this).data("dataTable")){b(this).data("dataTable",{}),a=a||{};var c={};b(this).find("thead th").each(function(){c[b(this).attr("data-key")]={type:b(this).attr("data-type")||"text",title:b(this).attr("data-title")||"",style:{width:b(this).attr("data-style-width"),horizontalAlign:b(this).attr("data-style-horizontal-align"),verticalAlign:b(this).attr("data-style-vertical-align"),backgroundColor:b(this).attr("data-style-background-color")}}});var d=b(this).find("tbody tr").map(function(){var a={};return b(this).find("td").each(function(){var d=b(this).attr("data-key");a[d]="text"===c[d].type?b(this).html():b(this).children("span").map(function(){var a=b(this).attr("data-type");return"text"===a?{type:"text",clazz:b(this).attr("data-class"),text:b(this).html(),tooltip:b(this).attr("data-tooltip")}:"image"===a?{type:"image",clazz:b(this).attr("data-class"),src:b(this).attr("data-src"),alt:b(this).html(),tooltip:b(this).attr("data-tooltip")}:"link"===a?{type:"link",clazz:b(this).attr("data-class"),href:b(this).attr("data-href"),text:b(this).html(),tooltip:b(this).attr("data-tooltip")}:"textbox"===a?{type:"textbox",clazz:b(this).attr("data-class"),value:b(this).html(),width:b(this).attr("data-width"),tooltip:b(this).attr("data-tooltip")}:"hidden"===a?{type:"hidden",clazz:b(this).attr("data-class"),value:b(this).html(),tooltip:b(this).attr("data-tooltip")}:void 0}).get()}),a});return b(this).addClass("data-table").empty().append(b('<div class="table-wrap"></div>').append(b('<table class="table table-bordered"></table>').append(b("<thead></thead>")).append(b("<tbody></tbody>")))).dataTable().setColumns(c).dataTable().addRow(d)}}),{$this:this,setColumns:function(a){var c=this.$this;this.clear(),c.data("dataTable",{columns:a}),c.find(".table-wrap > table > thead").empty().append(b("<tr></tr>"));for(var d in a)!function(a,d){c.find(".table-wrap > table > thead > tr").append(b("<th></th>").data("dataTable",{type:d.type,key:a,title:d.title,style:{width:d.style.width,horizontalAlign:d.style.horizontalAlign,verticalAlign:d.style.verticalAlign,backgroundColor:d.style.backgroundColor}}).css({width:parseInt(d.style.width)+"px","text-align":{left:"left",center:"center",right:"right"}[d.style.horizontalAlign]||"left"}).html(d.title))}(d,a[d]);return this.$this},clear:function(){return this.$this.find(".table-wrap > table > tbody").empty(),this.$this},addRow:function(a){var c=this.$this;return b(a).each(function(a,d){var e=b("<tr></tr>");for(var f in c.data("dataTable").columns)!function(a,c){var f=b("<td></td>");"text"===c.type?f.data("dataTable",{key:a,value:d[a]}).html(d[a]||""):(f.data("dataTable",{key:a,value:d[a]}),b.each(d[a],function(a,c){return"text"===c.type?f.append(b("<span></span>").addClass(c.clazz||"").html(c.text||"").attr({title:c.tooltip||""})):"image"===c.type?f.append(b("<img />").addClass(c.clazz||"").attr({src:c.src||"",alt:c.alt||"",title:c.tooltip||""})):"link"===c.type?f.append(b("<a></a>").addClass(c.clazz||"").html(c.text||"").attr({href:c.href||"",title:c.tooltip||""})):"textbox"===c.type?f.append(b('<input type="text" />').addClass(c.clazz||"").width(parseInt(c.width)||0).attr({value:c.value||"",title:c.tooltip||""})):"hidden"===c.type?f.append(b('<input type="hidden" />').addClass(c.clazz||"").attr({value:c.value,title:c.tooltip||""})):void 0})),e.append(f.css({"text-align":{left:"left",center:"center",right:"right"}[c.style.horizontalAlign]||"left","vertical-align":{top:"top",middle:"middle",bottom:"bottom"}[c.style.verticalAlign]||"middle","background-color":c.style.backgroundColor||"transparent"}))}(f,c.data("dataTable").columns[f]);c.find(".table-wrap > table > tbody").append(e)}),this.$this}}}})}),define("page/widget/data-table/css/data-table.css",[],function(){seajs.importStyle(".data-table .table-wrap{width:auto;overflow-x:auto;overflow-y:hidden}.panel>.panel-body>.data-table .table-wrap{margin:-16px}.data-table table{margin:0}.data-table table img{max-width:60px;height:30px}.data-table table th{vertical-align:middle}")}),define("page/widget/advanced-pagination/js/advanced-pagination",["lib/cmd/jquery/2.0.3/jquery.js","lib/cmd/bootstrap/3.2.0/js/bootstrap.min.js","../css/advanced-pagination.css"],function(a){var b=a("lib/cmd/jquery/2.0.3/jquery.js");a("lib/cmd/bootstrap/3.2.0/js/bootstrap.min.js"),a("../css/advanced-pagination.css"),b.fn.extend({advancedPagination:function(a){return a=a||{},this.each(function(){b(this).data("advancedPagination")||(b(this).data("advancedPagination",{}),b(this).addClass("advanced-pagination").advancedPagination().reload(a))}),{$this:this,reload:function(a){a=a||{};var b=this.$this,c=a.current||parseInt(b.attr("data-current")),d=b.data("advancedPagination");return d.url=a.url||d.url||b.attr("data-url")||"javascript:void(0)",d.min=a.min||d.min||parseInt(b.attr("data-min"))||"1",d.max=a.max||d.max||parseInt(b.attr("data-max"))||"1",d.range=a.range||d.range||parseInt(b.attr("data-range"))||"3",b.empty().advancedPagination().page(c),this.$this},page:function(a){function c(a,c,f){h.append(b("<li></li>").addClass("pagination-page").addClass(f?"active":"").append(b("<a></a>").html(c).attr({href:e.url.replace("$",a),"data-page":a}).click(function(c){var c=b.Event("pagination");c.page=a,d.trigger(c,function(){d.advancedPagination().page(a)})})))}var d=this.$this,e=d.data("advancedPagination");e.current=a;var f=e.current-e.range,g=e.current+e.range;f<=e.min&&(f=e.min,g=e.min+2*e.range+1),g>=e.max&&(f=e.max-2*e.range-1,g=e.max),(f<e.min||g>e.max)&&(f=e.min,g=e.max);var h=b('<ul class="pagination"></ul>');c(e.min,"&laquo;"),f>e.min&&c(f-1,"...");for(var a=f;g>=a;a++)c(a,a,a==e.current);return g<e.max&&c(g+1,"..."),c(e.max,"&raquo;"),h.append(b("<li></li>").append(b("<a></a>").attr("href","javascript:void(0)").append(b('<span class="glyphicon glyphicon-send"></span>')).popover({content:b('<div class="input-group input-group-sm quick-pagination"></div>').append(b('<input type="text" class="form-control" />').keypress(function(a){13==a.which&&b(this).siblings("span").children("button").click()})).append(b('<span class="input-group-btn"></span>').append(b('<button type="button" class="btn btn-primary">Go</button>').click(function(a){var c=parseInt(b(this).parent().siblings("input").val());if(c>=e.min&&c<=e.max){var a=b.Event("pagination");a.page=c,d.trigger(a,function(){d.advancedPagination().page(c)}),window.location=e.url.replace("$",c)}}))),html:!0,placement:"top"}).on("shown.bs.popover",function(){b(this).siblings(".popover").find("input").focus()}))),d.empty().append(h),this.$this}}}})}),define("page/widget/advanced-pagination/css/advanced-pagination.css",[],function(){seajs.importStyle(".advanced-pagination{margin-left:30px;margin-right:30px}.panel>.panel-footer .advanced-pagination{margin-top:-5px;margin-bottom:-10px}.panel>.panel-footer .advanced-pagination>ul{margin:0}.advanced-pagination .quick-pagination{width:80px}.advanced-pagination .quick-pagination input{text-align:center}")});