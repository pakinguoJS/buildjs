define("page/app/banner/js/banner.modify",["lib/cmd/jquery/2.0.3/jquery.js","lib/cmd/swf/swfupload.js","page/app/banner/js/banner.modify.swf.config","page/widget/ivy_alert/js/ivy.alert.js","lib/cmd/jquery/validation/1.10.0/jquery.validate.min.js"],function(a){function b(a){var b=a.rule_type.value;if(1==b){var c=a.rules.value;return""===c?"Rules is required!":{rules:c,sorts:{sort_by:a.sorts.value,sort_type:a.sort_type.value}}}return 2==b?""===a.tsv_file.value?"Tsv file is required":{tsv_file:a.tsv_file.value}:3==b?""===a.action_url.value?"Action url is required":{action_url:a.action_url.value}:4==b?""===a.url.value?"Url is required":{url:a.url.value}:!1}var c=a("lib/cmd/jquery/2.0.3/jquery.js"),d=a("lib/cmd/swf/swfupload.js"),e=a("page/app/banner/js/banner.modify.swf.config"),f=a("page/widget/ivy_alert/js/ivy.alert.js");a("lib/cmd/jquery/validation/1.10.0/jquery.validate.min.js"),new d({upload_url:"/cms/index.php/upload/up2tfs",post_params:{},file_size_limit:"2 MB",file_types:"*.jpg;*.png;*.gif",file_types_description:"JPG/PNG/GIF Images",file_upload_limit:"0",file_queue_error_handler:e.file_queue_error_handler,file_dialog_complete_handler:e.file_dialog_complete_handler,upload_progress_handler:e.upload_progress_handler,upload_error_handler:e.upload_error_handler,upload_success_handler:function(a,b){try{b=JSON.parse(b),0==b.ret?(c("#banner_url").val(b.data.pic_url),c("#upload_img").removeClass("hidden").attr("src",b.data.pic_url),f("Upload successfully!")):f(b.data.err_info.msg)}catch(d){f(b)}},upload_complete_handler:e.upload_complete_handler,button_placeholder_id:"upload",button_width:1e3,button_height:300,button_window_mode:d.WINDOW_MODE.TRANSPARENT,button_cursor:d.CURSOR.HAND,flash_url:"/cms/resource/lib/cmd/swf/swfupload.swf",debug:!1}),new d({upload_url:"/cms/index.php/upload/do_upload",post_params:{user_name:"s_id"},file_size_limit:"2 MB",file_types:"*.tsv",file_types_description:"tsv",file_upload_limit:"0",file_queue_error_handler:function(a,b,c){switch(b){case d.QUEUE_ERROR.QUEUE_LIMIT_EXCEEDED:f("Single file only!");break;case d.QUEUE_ERROR.ZERO_BYTE_FILE:f("File size is 0!");break;case d.QUEUE_ERROR.FILE_EXCEEDS_SIZE_LIMIT:f("The file exceeds 2M.");break;case d.QUEUE_ERROR.INVALID_FILETYPE:f("Files only can be .tsv.");break;default:f(c)}},file_dialog_complete_handler:e.file_dialog_complete_handler,upload_progress_handler:e.upload_progress_handler,upload_error_handler:e.upload_error_handler,upload_success_handler:function(a,b){try{b=JSON.parse(b),0==b.ret?(c("#tsv_file").val(b.data.upload_path),c("#tsv_file_name").val("File Name: "+b.data.upload_path.split("/")[1]),f("Upload successfully!")):f(b.data.err_info.msg)}catch(d){f(b)}},upload_complete_handler:e.upload_complete_handler,button_placeholder_id:"tsv",button_width:1e3,button_height:300,button_window_mode:d.WINDOW_MODE.TRANSPARENT,button_cursor:d.CURSOR.HAND,flash_url:"/cms/resource/lib/cmd/swf/swfupload.swf",debug:!1}),c("#rule_type").change(function(){c(".form-panel").addClass("hidden"),c("#type"+this.value).removeClass("hidden")}).change(),c("#form").validate({rules:{title:{required:!0}},errorElement:"span",errorPlacement:function(a,b){b.parent().find('[data-control="form-input-error"]').append(a)},submitHandler:function(a){if(!c("#banner_url").val())return void f("Banner is required!");f("Loading...",{toggle:!0});var d={id:a.id.value,title:a.title.value,banner_url:a.banner_url.value,rule_type:a.rule_type.value},e=b(a);return"string"==typeof e?void alert(e):(d.rule_info=JSON.stringify(e),void c.post("/cms/index.php/banner/do_modify",d,function(a){0==a.ret?f(a.msg,function(){location.href="/cms/index.php/banner/index"}):f(a.msg)},"json"))}})}),define("page/app/banner/js/banner.modify.swf.config",["lib/cmd/jquery/2.0.3/jquery.js","page/widget/ivy_alert/js/ivy.alert.js"],function(a){var b=a("lib/cmd/jquery/2.0.3/jquery.js"),c=a("page/widget/ivy_alert/js/ivy.alert.js");return{file_queue_error_handler:function(a,b,d){switch(b){case SWFUpload.QUEUE_ERROR.QUEUE_LIMIT_EXCEEDED:c("Single image only!");break;case SWFUpload.QUEUE_ERROR.ZERO_BYTE_FILE:c("File size is 0!");break;case SWFUpload.QUEUE_ERROR.FILE_EXCEEDS_SIZE_LIMIT:c("The image exceeds 2M.");break;case SWFUpload.QUEUE_ERROR.INVALID_FILETYPE:c("Image files can be .bmp, .png, .jpeg, .jpg or .gif");break;default:c(d)}},file_dialog_complete_handler:function(a,b){b>0&&(this.startUpload(),c("Uploading..."))},upload_progress_handler:function(){},upload_error_handler:function(a,b,d){c(d)},upload_success_handler:function(a,d){try{d=JSON.parse(d),0==d.ret?(b("#banner_url").val(d.data.pic_url),b("#upload_img").show().html('<img src="'+d.data.pic_url+'"/>'),c("Upload successfully!")):c(d.data.err_info.msg)}catch(e){c(d)}},upload_complete_handler:function(){}}}),define("page/widget/ivy_alert/js/ivy.alert",["page/widget/ivy_alert/css/ivy.alert.css","page/widget/ivy_alert/template/tpl.ivy.alert.js"],function(a,b,c){function d(a,b){h.find("#ivyAlertMain").text(a),b?null:b={},e(b),clearTimeout(g),b.toggle||(g=setTimeout(function(){f(),"function"==typeof b?b():"function"==typeof b.callback?b.callback():null},"number"==typeof b?b:b.duration?b.duration:i.duration))}function e(a){h.appendTo($("body")),setTimeout(function(){a.top?h.find("#ivyAlertMain").parent().css("top",a.top):h.find("#ivyAlertMain").parent().css("top",i.top),a.useMask?h.find("#ivyAlertMask").show():i.useMask?h.find("#ivyAlertMask").show():h.find("#ivyAlertMask").hide(),h.fadeIn(200)},20)}function f(){h.fadeOut(100,function(){h.detach()})}a("page/widget/ivy_alert/css/ivy.alert.css");var g,h=$(a("page/widget/ivy_alert/template/tpl.ivy.alert.js")),i={duration:1500,top:120,useMask:!0,callback:null};d.config=function(a){$.extend(i,a)},c.exports=d}),define("page/widget/ivy_alert/css/ivy.alert.css",[],function(){seajs.importStyle(".ivy-alert-wrap{position:fixed;top:0;left:0;width:100%;height:100%;z-index:1000;display:none}.ivy-alert{position:relative;margin:0 auto;min-height:50px;max-width:600px;text-align:center;top:120px}.ivy-alert-mask{position:absolute;top:0;left:0;width:100%;height:100%;background-color:rgba(255,255,255,.5);z-index:1001}.ivy-alert-main{position:relative;display:inline-block;font-size:14px;font-weight:700;color:#42484d;padding:16px 30px;background-color:#fff;border:1px solid #e15c4d;border-radius:3px;box-shadow:1px 1px 3px rgba(0,0,0,.35);z-index:1002}")}),define("page/widget/ivy_alert/template/tpl.ivy.alert",[],'<div class="ivy-alert-wrap">    <div id="ivyAlertMask" class="ivy-alert-mask"></div>    <div class="ivy-alert">        <p id="ivyAlertMain" class="ivy-alert-main"></p>    </div></div>');