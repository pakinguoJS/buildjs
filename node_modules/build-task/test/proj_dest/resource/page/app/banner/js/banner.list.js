define("page/app/banner/js/banner.list",["lib/cmd/jquery/2.0.3/jquery.js","page/widget/ivy_alert/js/ivy.alert.js","page/app/common/js/common.pagingbar.js","page/widget/banner-preview/js/banner-preview.js","page/app/banner/js/banner.list.data"],function(a){function b(a){if(a&&0!==a.length){for(var b="",c=(f.getPageNum()-1)*f.getPageSize()+1,d=0,g=a.length;g>d;d++)b+=h.replace(/{index}/g,c+d).replace(/{title}/g,a[d].title).replace(/{banner_url}/g,a[d].banner_url).replace(/{banner_type}/g,j[a[d].rule_type]).replace(/{status_cls}/g,1==a[d].status?"color_green":"color_red").replace(/{status_val}/g,1==a[d].status?1:0).replace(/{status_title}/g,1==a[d].status?"Click to offline":"Click to online").replace(/{status_icon}/g,1==a[d].status?"glyphicon-ok-sign":'glyphicon-minus-sign"').replace(/{last_update}/g,a[d].last_update).replace(/{id}/g,a[d]._id_h).replace(/{show_index}/g,a[d].show_index);return b}return e("No data"),""}function c(a){if(a){for(var b='<li>						<div>							<img src="{$banner_url}">							<p>{$title}</p>						</div>					</li>',c=[],d=0,e=a.length;e>d;d++)c.push(b.replace("{$banner_url}",a[d].banner_url).replace("{$title}",a[d].title));for(d=6-e;d>0;d--)c.push("<li></li>");return c.join("")}return"<li></li><li></li><li></li><li></li><li></li><li></li>"}var d=a("lib/cmd/jquery/2.0.3/jquery.js"),e=a("page/widget/ivy_alert/js/ivy.alert.js"),f=a("page/app/common/js/common.pagingbar.js");a("page/widget/banner-preview/js/banner-preview.js"),d("#modified-preview, #live-preview").bannerPreview(),f.gotoPage=function(a){a>0&&a<=f._data.total_page_num?(f.setPageNum(a),d("#common-pagingbar").find("li").removeClass("active"),d("#common-pagingbar").find('a[data-val="'+a+'"]').parent().addClass("active"),d.get("/cms/index.php/banner/get_more",{page:f.getPageNum(),num:f.getPageSize()},function(a){var c=b(a.data.data.list);""!==c&&(d("#homeList").children().remove(),d("#homeList").html(c))},"json")):d("#common-pagingbar-goto").focus()},f.init({page_size:parseInt(d("#common-pagingbar-page_size").val()),page_num:parseInt(d("#common-pagingbar-page_num").val()),total_page_num:parseInt(d("#common-pagingbar-total_page_num").val()),country:d("#country").val()});for(var g,h=a("page/app/banner/js/banner.list.data.js"),i=d("#bannerTypeList").val().split(","),j={},k=0,l=i.length;l>k;k++)g=i[k].split("|"),j[g[0]]=g[1];d("#homeList").delegate('a[data-rel="status"]',"click",function(){var a=d(this);"0"==a.attr("data-val")?d.getJSON("/cms/index.php/banner/online",{id:a.attr("data-id")},function(b){0==b.ret?(a.attr("data-val",1).attr("title","Click to offline").removeClass("color_red").addClass("color_green").children().removeClass("glyphicon-minus-sign").addClass("glyphicon-ok-sign"),d("#home_online").html(c(b.data.online_list))):e(b.msg)}):d.getJSON("/cms/index.php/banner/offline",{id:a.attr("data-id")},function(b){0==b.ret?(a.attr("data-val",0).attr("title","Click to online").removeClass("color_green").addClass("color_red").children().removeClass("glyphicon-ok-sign").addClass("glyphicon-minus-sign"),d("#home_online").html(c(b.data.online_list))):e(b.msg)})}),d("#release-btn").click(function(){d.getJSON("/cms/index.php/release/banner","",function(a){0==a.ret?e(a.msg,function(){d("#home_release").html(d("#home_online").html())}):e(a.msg)})});var m={sortEvent:function(){d("#homeList").delegate('input[data-rel="sort"]',"change",function(){var a=+parseInt(this.value);if(!isNaN(a)){var b=d(this);d.getJSON("/cms/index.php/banner/modify_index",{id:b.attr("data-id"),show_index:a},function(a){d("#home_online").html(c(a.data.online_list))})}})}};m.sortEvent()}),define("page/widget/ivy_alert/js/ivy.alert",["page/widget/ivy_alert/css/ivy.alert.css","page/widget/ivy_alert/template/tpl.ivy.alert.js"],function(a,b,c){function d(a,b){h.find("#ivyAlertMain").text(a),b?null:b={},e(b),clearTimeout(g),b.toggle||(g=setTimeout(function(){f(),"function"==typeof b?b():"function"==typeof b.callback?b.callback():null},"number"==typeof b?b:b.duration?b.duration:i.duration))}function e(a){h.appendTo($("body")),setTimeout(function(){a.top?h.find("#ivyAlertMain").parent().css("top",a.top):h.find("#ivyAlertMain").parent().css("top",i.top),a.useMask?h.find("#ivyAlertMask").show():i.useMask?h.find("#ivyAlertMask").show():h.find("#ivyAlertMask").hide(),h.fadeIn(200)},20)}function f(){h.fadeOut(100,function(){h.detach()})}a("page/widget/ivy_alert/css/ivy.alert.css");var g,h=$(a("page/widget/ivy_alert/template/tpl.ivy.alert.js")),i={duration:1500,top:120,useMask:!0,callback:null};d.config=function(a){$.extend(i,a)},c.exports=d}),define("page/widget/ivy_alert/css/ivy.alert.css",[],function(){seajs.importStyle(".ivy-alert-wrap{position:fixed;top:0;left:0;width:100%;height:100%;z-index:1000;display:none}.ivy-alert{position:relative;margin:0 auto;min-height:50px;max-width:600px;text-align:center;top:120px}.ivy-alert-mask{position:absolute;top:0;left:0;width:100%;height:100%;background-color:rgba(255,255,255,.5);z-index:1001}.ivy-alert-main{position:relative;display:inline-block;font-size:14px;font-weight:700;color:#42484d;padding:16px 30px;background-color:#fff;border:1px solid #e15c4d;border-radius:3px;box-shadow:1px 1px 3px rgba(0,0,0,.35);z-index:1002}")}),define("page/widget/ivy_alert/template/tpl.ivy.alert",[],'<div class="ivy-alert-wrap">    <div id="ivyAlertMask" class="ivy-alert-mask"></div>    <div class="ivy-alert">        <p id="ivyAlertMain" class="ivy-alert-main"></p>    </div></div>'),define("page/app/common/js/common.pagingbar",[],function(a,b,c){var d={_data:{page_size:20,page_num:1,total_page_num:1},init:function(a){"object"==typeof a&&($.extend(d._data,a),d.bindIndexEvt(),d.bindGotoEvt(),d.bindPrevAndNextEvt())},setPageSize:function(a){a=parseInt(a),isNaN(a)||(d._data.page_size=a)},getPageSize:function(){return d._data.page_size},setPageNum:function(a){a=parseInt(a),isNaN(a)||(d._data.page_num=a)},getPageNum:function(){return d._data.page_num},bindIndexEvt:function(){$('a[data-rel="common-paging-idx"]').click(function(){var a=$(this),b=parseInt(a.attr("data-val"));d.gotoPage(b),a.parent().parent().children().removeClass("active"),a.parent().addClass("active")})},bindGotoEvt:function(){var a;$("#common-pagingbar-goto").focus(function(){clearTimeout(a),$(this).next().fadeIn()}).blur(function(){var b=this;a=setTimeout(function(){$(b).next().fadeOut()},500)}).next().click(function(){var a=parseInt($(this).prev().val());d.gotoPage(a)})},bindPrevAndNextEvt:function(){$("#common-pagingbar-prev").click(d.prevPage),$("#common-pagingbar-next").click(d.nextPage)},gotoPage:function(a){a>0&&a<=d._data.total_page_num?location.href=location.search?location.href.replace(location.search,"?"+$.param($.extend({},d._data,{page_num:a}))):location.href+"?"+$.param($.extend({},d._data,{page_num:a})):$("#common-pagingbar-goto").focus()},prevPage:function(){1===d._data.page_num?alert("This is the first page!"):d.gotoPage(d._data.page_num-1)},nextPage:function(){d._data.page_num===d._data.total_page_num?alert("This is the last page!"):d.gotoPage(d._data.page_num+1)}};c.exports=d}),define("page/widget/banner-preview/js/banner-preview",["lib/cmd/jquery/2.0.3/jquery.js","lib/cmd/bootstrap/3.2.0/js/bootstrap.min.js","../css/banner-preview.css"],function(a){var b=a("lib/cmd/jquery/2.0.3/jquery.js");a("lib/cmd/bootstrap/3.2.0/js/bootstrap.min.js"),a("../css/banner-preview.css"),b.fn.extend({bannerPreview:function(a){return a=a||{},this.each(function(){if(!b(this).data("bannerPreview")){b(this).data("bannerPreview",{});var a=b(this).find("li").map(function(){return{title:b(this).attr("data-title"),imageUrl:b(this).attr("data-image-url")}}),c=b(this);b(this).addClass("banner-preview").empty().append(b('<button class="switch-btn switch-to-list"></button>').addClass("hidden").html('<span class="glyphicon glyphicon-align-justify"></span>').click(function(){c.find(".switch-btn.switch-to-list").addClass("hidden"),c.find(".preview.carousel-preview").addClass("hidden"),c.find(".switch-btn.switch-to-carousel").removeClass("hidden"),c.find(".preview.list-preview").removeClass("hidden")})).append(b('<button class="switch-btn switch-to-carousel"></button>').html('<span class="glyphicon glyphicon-sound-stereo"></span>').click(function(){c.find(".switch-btn.switch-to-carousel").addClass("hidden"),c.find(".preview.list-preview").addClass("hidden"),c.find(".switch-btn.switch-to-list").removeClass("hidden"),c.find(".preview.carousel-preview").removeClass("hidden")})).append(b('<div class="preview list-preview"></div>').append(b("<ul></ul>"))).append(b('<div class="preview carousel-preview"></div>').addClass("hidden").append(b('<div class="search-banner"></div>').append(b('<ul class="carousel-slide clearfix"></ul>')).append(b('<button type="button" class="search-banner-btn prev-btn"></button>').html('<span class="glyphicon glyphicon-chevron-left"></span>').click(function(){c.bannerPreview().scrollToPrev()})).append(b('<button type="button" class="search-banner-btn next-btn"></button>').html('<span class="glyphicon glyphicon-chevron-right"></span>').click(function(){c.bannerPreview().scrollToNext()})))).bannerPreview().addItem(a),setInterval(function(){c.bannerPreview().scrollToNext()},3500)}}),{$this:this,clear:function(){return this.$this.find(".preview.list-preview > ul").empty(),this.$this.find(".preview.carousel-preview .search-banner > ul").empty(),this.$this},addItem:function(a){var c=this.$this;return b(a).each(function(a,d){c.find(".preview.list-preview > ul").append(b("<li></li>").data("bannerPreview",{title:d.title,imageUrl:d.imageUrl}).append(b('<img src="'+d.imageUrl+'" alt="'+d.title+'" />'))),c.find(".preview.carousel-preview .search-banner > ul").append(b('<li class="carousel-item pull-left"></li>').append(b('<img src="'+d.imageUrl+'" alt="'+d.title+'" />'))),c.bannerPreview().scrollToFirst()}),this.$this},getItemList:function(){return this.$this.find(".preview.list-preview > ul > li").map(function(){return{title:b(this).data("bannerPreview").title,imageUrl:b(this).data("bannerPreview").imageUrl}}).get()},scrollToItem:function(a){var b=a.position().left;this.$this.find(".carousel-slide").css("left",-b+"px"),this.$this.find(".carousel-item.active").removeClass("active"),a.addClass("active")},scrollToFirst:function(){var a=this.$this.find(".carousel-item:first-of-type");this.scrollToItem(a)},scrollToPrev:function(){var a=this.$this.find(".carousel-item.active").prev(".carousel-item");a.length||(a=this.$this.find(".carousel-item:last-of-type")),this.scrollToItem(a)},scrollToNext:function(){var a=this.$this.find(".carousel-item.active").next(".carousel-item");a.length||(a=this.$this.find(".carousel-item:first-of-type")),this.scrollToItem(a)}}}})}),define("page/widget/banner-preview/css/banner-preview.css",[],function(){seajs.importStyle(".banner-preview{position:relative;margin:-15px}.banner-preview .switch-btn{position:absolute;z-index:1010;right:0;top:0;width:50px;height:50px;padding:0;padding-left:5px;border:0;border-right:1px solid rgba(85,85,85,.85);border-bottom:1px solid rgba(85,85,85,.85);border-bottom-left-radius:15px;font-size:16px;color:#fff;background:rgba(68,68,68,.85);opacity:0;outline:0;-webkit-transition:opacity .15s;-o-transition:opacity .15s;transition:opacity .15s}.banner-preview:hover .switch-btn{opacity:1}.banner-preview .preview{width:320px;height:500px;border-bottom-left-radius:3px;border-bottom-right-radius:3px;overflow:hidden}.banner-preview .preview.carousel-preview{background:#f0f2f1 url(../img/bg.jpg) center -15px no-repeat;background-size:100%}.banner-preview .preview.carousel-preview .search-banner{position:relative;margin:104px auto 0;width:280px;height:85px;overflow:hidden}.banner-preview .preview.carousel-preview .search-banner>ul{position:absolute;left:0;top:0;width:9999px;margin:0;padding:0;list-style:none;-webkit-transition:left .5s;-o-transition:left .5s;transition:left .5s}.banner-preview .preview.carousel-preview .search-banner>ul>li{width:280px;height:85px;background:#ddd url(http://htpic.tc.qq.com/IBG_c5a7661f7241f698463bd41698c33ddc) center center no-repeat;background-size:100%}.banner-preview .preview.carousel-preview .search-banner>ul>li img{width:100%}.banner-preview .preview.carousel-preview .search-banner>.search-banner-btn{position:absolute;top:0;z-index:1005;width:50px;height:100%;padding:0 10px;border:0;font-size:20px;color:#fff;text-shadow:0 1px 2px rgba(0,0,0,.6);background:transparent;opacity:0;outline:0;-webkit-transition:opacity .15s;-o-transition:opacity .15s;transition:opacity .15s}.banner-preview .preview.carousel-preview .search-banner:hover>.search-banner-btn{opacity:.8}.banner-preview .preview.carousel-preview .search-banner>.search-banner-btn:hover{opacity:1}.banner-preview .preview.carousel-preview .search-banner>.prev-btn{left:0;text-align:left}.banner-preview .preview.carousel-preview .search-banner>.next-btn{right:0;text-align:right}.banner-preview .preview.list-preview{background:#f0f2f1;overflow-x:hidden;overflow-y:auto}.banner-preview .preview.list-preview>ul{width:280px;margin:0 auto;padding:0;list-style:none}.banner-preview .preview.list-preview>ul>li{height:85px;margin:12px 0;overflow:hidden}.banner-preview .preview.list-preview>ul>li img{width:100%;cursor:default}")}),define("page/app/banner/js/banner.list.data",[],'<tr>    <td class="text-align-center">{index}</td>    <td>{title}</td>    <td class="text-align-center">        <img src="{banner_url}"/>    </td>    <td class="text-align-center">{banner_type}</td>    <td class="text-align-center">        <a href="javascript:void(0)" class="{status_cls}" data-id="{id}" data-val="{status_val}" data-rel="status" title="{status_title}"><span class="glyphicon {status_icon}"></span></a>    </td>    <td>{last_update}</td>    <td class="text-align-center">        <a class="color_green" href="/cms/index.php/banner/modify/?id={id}" title="edit"><span class="glyphicon glyphicon-edit"></span></a>        <a class="color_red" href="javascript:void(0)" data-val="{id}" title="delete"><span class="glyphicon glyphicon-remove"></span></a>    </td>    <td>        <input class="form-control home-show-index" type="text" data-rel="sort" data-id="{id}" value="{show_index}" maxlength="5"/>    </td></tr>');