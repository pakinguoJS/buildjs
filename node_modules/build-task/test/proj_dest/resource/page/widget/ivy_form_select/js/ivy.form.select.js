define("page/widget/ivy_form_select/js/ivy.form.select",["lib/cmd/jquery/2.0.3/jquery.js","ivy.region.data"],function(a,b,c){function d(a,b,c){var d,e,f,g="";for(d=IVYCountryRegion.getList(b,c),e=0,f=d.length;f>e;e++)g+='<li data-val="'+d[e].value+'" data-text="'+d[e].name+'">'+d[e].name+"</li>";a.children().remove(),a.append(o(g).click(i).mouseenter(j)),a.parent().data("toggle",!1)}function e(a,b){b?null:b={},a.each(function(){var a=h(),c=o(this);c.data("eid",a),c.unbind("click").click(function(a){o(a.target).is("input")||f.call(this,b)})}),a.find("li").unbind("click").click(i).mouseenter(j),a.find('input[type="text"]').unbind("change").change(function(){var a=o(this).parent(),b=a.find('input[type="text"]').val(),c=a.find('[data-text="'+b+'"]');a.find('input[type="hidden"]').val(c.length>0?c.attr("data-val"):b)}).unbind("keydown").bind("keydown",l).unbind("focus").focus(function(){f.call(o(this).parent()[0],b)}),a.each(function(){var a=o(this),b=a.find('input[type="hidden"]').val(),c=a.find('[data-val="'+b+'"]').addClass("active");a.find('input[type="text"]').val(c.length>0?c.text():b)}),b.disabled||a.find('input[type="text"]').removeAttr("disabled")}function f(a){var b,c=o(this);if(c.data("toggle"))c.find("ul").hide().children().removeClass("hover"),c.data("toggle",!1),o(document).unbind("click",r[c.data("eid")]),a.disableInput?o(document).unbind("keydown",k):null;else{b=c.find("ul").show();var d=b.children('[data-val="'+c.find('input[type="hidden"]').val()+'"]').addClass("active");b.scrollTop(b.children().index(d)*p),c.data("toggle",!0),o(document).bind("click",{_this:c[0],option:a},r[c.data("eid")]),a.disableInput?o(document).bind("keydown",k):null}}function g(a,b){a.find("ul").children().click(b)}function h(){var a="docClick"+q++;return r[a]=function(b){var c=b.target,d=b.data._this,e=b.data.option;c!==d&&c.parentNode!==d&&c.parentNode.parentNode!==d&&(o(d).find("ul").hide().children().removeClass("hover"),o(d).data("toggle",!1),o(document).unbind("click",r[a]),e.disableInput?o(document).unbind("keydown",k):null)},a}function i(){var a=o(this);a.parent().children().removeClass("active hover"),a.addClass("active"),a.attr("data-val")!=a.parent().prev("input").val()&&(a.parent().prev("input").val(a.attr("data-val")),a.parent().prev().prev().val(a.text()))}function j(){o(this).parent().children().removeClass("active hover"),o(this).addClass("hover")}function k(a){a.preventDefault()}function l(a){9===a.keyCode&&o(a.target).parent().click()}function m(a){"form-control-select"===a.attr("data-control")&&a.addClass("form_control_select_disabled").find('input[type="text"]').attr("disabled","")}function n(a){"form-control-select"===a.attr("data-control")&&a.removeClass("form_control_select_disabled").find('input[type="text"]').removeAttr("disabled")}var o=a("lib/cmd/jquery/2.0.3/jquery.js");IVYCountryRegion=a("ivy.region.data");var p=20,q=0,r={};c.exports={generate:d,init:e,select:g,disabled:m,enabled:n}});