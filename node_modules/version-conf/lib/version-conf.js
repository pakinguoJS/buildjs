var FS = require('fs');
var PATH = require('path');
var mkdir = require('util-mkdir');


module.exports = setAlias;


/**
* @param	{string}	dest		输出源文件路径和目标路径
* @param	{regexp}	vreg		vreg
*/
function setAlias(src, dest, vreg){
	if(arguments.length < 2){
		console.log('SetAlias function is required at least 1 paramters!');
		return;
	}
	
	vreg	? null : vreg		= "{__v__}";

	// make sure file is existed
	if(!FS.existsSync(dest)){
		mkdir(PATH.dirname(dest));
	}
	
	var data = FS.readFileSync(src, 'utf-8').replace(vreg, new Date().getTime());
	FS.writeFileSync(dest, data, 'utf-8');
}