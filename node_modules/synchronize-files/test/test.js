var synchronize = require('synchronize-files');

var exceptsrc 	= 'D:/Pakinguo_documents/My Github/buildjs/node_modules/synchronize-files/proj/front';
var exceptdist 	= 'D:/Pakinguo_documents/My Github/buildjs/node_modules/synchronize-files/proj/resource';
var onlysrc 	= 'D:/Pakinguo_documents/My Github/buildjs/node_modules/synchronize-files/proj/front';
var onlydist 	= 'D:/Pakinguo_documents/My Github/buildjs/node_modules/synchronize-files/proj/views';

circle(function(){
	synchronize.compareExclude(exceptsrc, exceptdist);
	synchronize.compareOnly(onlysrc, onlydist);
})

function circle(callback, delay, limit){
    if(typeof callback !== 'function'){
        return;
    }

    // exec per 2 seconds
    delay ? null : delay = 1500;

    // exec total time
    limit ? null : limit = 60000;

    var s = new Date().getTime();
	var e;
    var i = setInterval(function(){
        callback();
		e = new Date().getTime();
        if(e - s > limit){
            clearInterval(i);
            console.log('Total:' + (e-s));
        }
    }, delay)
}