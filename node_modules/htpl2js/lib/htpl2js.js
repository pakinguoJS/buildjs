var FS = require('fs');
var PATH = require('path');
var mkdir = require('util-mkdir');


module.exports = htpl2js;


var __type = /\.htpl$/;

/**
 * @param	{string}	src		源文件
 * @param	{string}	dest	输出文件的路径
 * @param	{regexp}	type	匹配的文件格式
 */
function htpl2js(src, dest, type){
	type && type instanceof RegExp ? __type = type : null;
	mkdir(PATH.dirname(dest));
	FS.writeFileSync(dest, "define('" + FS.readFileSync(src, 'utf-8').replace(/'/g, "\\'").replace(/\r\n|\t/g, '') + "')", 'utf-8');
}