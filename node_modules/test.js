var FS = require('fs');

var ignore = require('D:/test_proj/conf.json/ignore.json');

var uglify = require('cmd-uglify');
// var modules = uglify.getModules('D:/test_proj/views');
// var dependencies = uglify.getDependencies('D:/test_proj/views','D:/test_proj/resource');
// var dependencies = uglify.getModuleDeps('D:/test_proj_dest/resource/page/widget');
// var deepdependencies = uglify.getDeepDeps('', 'D:/test_proj_dest/resource/page/widget', ignore);

// FS.writeFileSync('D:/test_proj_dest/deps.json', JSON.stringify(dependencies), 'utf-8');
// FS.writeFileSync('D:/test_proj_dest/deepdeps.json', JSON.stringify(deepdependencies), 'utf-8');

// var output = uglify.getUglifyConfig(['D:/test_proj_dest/resource/page/app','D:/test_proj_dest/resource/page/widget'], 'D:/test_proj_dest/resource/page', ignore);
// FS.writeFileSync('D:/test_proj_dest/_output_.json', JSON.stringify(output), 'utf-8');

var modsrc = ['D:/test_proj_dest/resource/page/app','D:/test_proj_dest/resource/page/widget'];
var base = 'D:/test_proj_dest/resource';
var gruntPath = './gruntjs';
uglify.uglifyTask(modsrc, base, function(){console.log('finish')}, gruntPath, ignore);